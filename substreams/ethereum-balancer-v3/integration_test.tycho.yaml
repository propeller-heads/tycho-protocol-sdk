substreams_yaml_path: ./substreams.yaml
protocol_type_names:
  - "balancer_v3_pool"
adapter_contract: "BalancerV3SwapAdapter"
adapter_build_signature: "constructor(address,address,address)"
adapter_build_args: "0xbA1333333333a1BA1108E8412f11850A5C319bA9,0x136f1EFcC3f8f88516B9E94110D56FDBfB1778d1,0x000000000022D473030F116dDEE9F6B43aC78BA3"
skip_balance_check: false 

# vault address for v3 needed for the router contract
initialized_accounts:
  - "0xbA1333333333a1BA1108E8412f11850A5C319bA9"

tests:
  - name: test_stable_pool_creation
    start_block: 21374757
    stop_block: 21374857 
    expected_components:
      - id: "0xc4ce391d82d164c166df9c8336ddf84206b2f812"
        tokens:
          - "0x0FE906e030a44eF24CA8c7dC7B7c53A6C4F00ce9"
          - "0x775F661b0bD1739349b9A2A3EF60be277c5d2D29"
        static_attributes:
          fee: "0x5af3107a4000"
          pool_type: "0x537461626c65506f6f6c466163746f7279"
          bpt: "0xc4ce391d82d164c166df9c8336ddf84206b2f812"
          manual_updates: "0x01"
        skip_simulation: true
        creation_tx: "0xecfe638ea155e78ca2698bea0bee5f86c2f77abe3e9dc93ed19ab6e674165b95"

  - name: test_weighted_pool_creation
    start_block: 21336938
    stop_block: 21336939 
    expected_components:
      - id: "0x527d0E14acc53FB040DeBeae1cAb973D23FB3568"
        tokens:
          - "0xba100000625a3754423978a60c9317c58a424e3D"
          - "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
        static_attributes:
          normalized_weights: "0x5b22307830623161326263326563353030303030222c22307830326336386166306262313430303030225d"
          manual_updates: "0x01"
          pool_type: "0x5765696768746564506f6f6c466163746f7279"
          fee: "0x2386f26fc10000"
        skip_simulation: true
        creation_tx: "0x44d82009c125f39bd2bbd1f723e7284e4226d5d752a66b18536e5d92c37b0c82"

  - name: test_swap_g_usdc
    start_block: 21389576 
    stop_block: 21389589
    expected_components:
      - id: "0xf91c11BA4220b7a72E1dc5E92f2b48D3fdF62726"
        tokens:
          - "0x440017A1b021006d556d7fc06A54c32E42Eb745B"
          - "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
        static_attributes:
          normalized_weights: "0x5b22307830366630356235396433623230303030222c22307830366630356235396433623230303030225d"
          manual_updates: "0x01"
          pool_type: "0x5765696768746564506f6f6c466163746f7279"
          fee: "0x0aa87bee538000"
        skip_simulation: false
        creation_tx: "0x50a58ca41af90029a67bc7f4305cceb1e85800246f9c559fa74d8625ddfe14ed"

  - name: test_swap_weth_ethx
    start_block: 21374920
    stop_block: 21374929 
    expected_components:
      - id: "0x4AB7aB316D43345009B2140e0580B072eEc7DF16"
        tokens:
          - "0x0bfc9d54Fc184518A81162F8fB99c2eACa081202"
          - "0xA35b1B31Ce002FBF2058D22F30f95D405200A15b"
        static_attributes:
          bpt: "0x4ab7ab316d43345009b2140e0580b072eec7df16"
          pool_type: "0x537461626c65506f6f6c466163746f7279"
          fee: "0x016bcc41e90000"
          manual_updates: "0x01"
        skip_simulation: false
        creation_tx: "0x6e8aea6ed4e566709c35cbb4298f89eac74ba5c39f64927a47b07de204dc8c9a"

  - name: test_swap_weth_wsteth
    start_block: 21374757
    stop_block: 21374770 
    expected_components:
      - id: "0xc4Ce391d82D164c166dF9c8336DDF84206b2F812"
        tokens:
          - "0x0FE906e030a44eF24CA8c7dC7B7c53A6C4F00ce9"
          - "0x775F661b0bD1739349b9A2A3EF60be277c5d2D29"
        static_attributes:
          bpt: "0xc4ce391d82d164c166df9c8336ddf84206b2f812"
          pool_type: "0x537461626c65506f6f6c466163746f7279"
          fee: "0x5af3107a4000"
          manual_updates: "0x01"
        skip_simulation: false
        creation_tx: "0xecfe638ea155e78ca2698bea0bee5f86c2f77abe3e9dc93ed19ab6e674165b95"

  - name: test_3_steps
    start_block: 21374757
    stop_block: 21374770 
    expected_components:
      - id: "0xc4Ce391d82D164c166dF9c8336DDF84206b2F812"
        tokens: 
          - "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
          - "0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0"
        static_attributes:
          bpt: "0xc4ce391d82d164c166df9c8336ddf84206b2f812"
          pool_type: "0x537461626c65506f6f6c466163746f7279"
          fee: "0x5af3107a4000"
          manual_updates: "0x01"
        skip_simulation: true
        creation_tx: "0xecfe638ea155e78ca2698bea0bee5f86c2f77abe3e9dc93ed19ab6e674165b95"
